<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My jwell cart</title>
    <style>
        img {
            width: 20%;
            height: 30%;
        }

        #data {
            display: grid;
            grid-template-columns: repeat(4, 20%);
            grid-gap: 5%;
        }

        #total {
            text-align: end;

        }

        h1 {
            text-align: center;
        }

        #total_price {
            text-align: end;
        }
    </style>
</head>

<body>

    <div id="total">Total_item</div>
    <div id="total_price">Total Price</div>
    <input type="text" name="" id="code" placeholder="Promocode">
    <button onclick="discount()">Apply promocode</button>

    <h1>YOUR CART ITEMS</h1>

    <div id="data"></div>
    <button onclick="checkout()">checkout</button>




</body>

</html>
<script>
    let div_data = document.getElementById("data");
    let total = document.getElementById("total");
    let total_p = document.getElementById("total_price");
    let code_30 = document.getElementById('code');

    function appendProd(e) {



        let p_name = document.createElement('p')
        p_name.innerHTML = e.name;

        let p_price = document.createElement('p')
        p_price.innerHTML = e.price

        let img = document.createElement('img')
        img.src = e.image





        div = document.createElement('div')
        div.append(p_name, p_price, img)
        div_data.append(div)

    }

    function showLocation() {

        let sum = 0;
        data = JSON.parse(localStorage.getItem('cartvisited'))
        total.append(data.length);
        for (i = 0; i < data.length; i++) {
            sum += Number(data[i].price);

        }




        total_p.append(sum);




        div_data.innerHTML = null

        data.forEach(function (e) {
            appendProd(e)


        })


    }
    showLocation();
    function discount() {
        data = JSON.parse(localStorage.getItem('cartvisited'))
        sum = 0;
        for (i = 0; i < data.length; i++) {
            sum += Number(data[i].price);

        }
        if (code_30.value == "masaischool") {

            alert("congratulation")
            sum = sum - ((sum / 100) * 30);
        } else {
            alert("sorry!not applied")
            sum = sum;
        }
        total_p.innerHTML = null
        total_p.append(`total price:${sum}`)
    }
    function checkout() {
        window.location.href = 'checkout.html'
    }






</script>